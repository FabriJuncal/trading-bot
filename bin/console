#!/usr/bin/env php
<?php
require_once __DIR__.'/../vendor/autoload.php';

use TradingBot\CLI\TradingCommand;
use TradingBot\Utilities\Config;
use Symfony\Component\Console\Application;
use TradingBot\CLI\ListCommand;
use TradingBot\CLI\NotificationCommand;
use TradingBot\CLI\TradingStopCommand;
use TradingBot\CLI\NotificationStopCommand;

try {
    // Inicializar configuración
    Config::initialize();
    
    // Crear aplicación CLI
    $application = new Application('Trading Bot', '1.0.0');
    
    // Registrar comandos
    $application->add(new TradingCommand());
    $application->add(new NotificationCommand());
    $application->add(new TradingStopCommand());
    $application->add(new ListCommand());
    $application->add(new NotificationStopCommand());
    
    // Ejecutar aplicación
    $application->run();
    
} catch (\Throwable $e) {
    echo "Error crítico: " . $e->getMessage() . PHP_EOL;
    echo "Trace: " . $e->getTraceAsString() . PHP_EOL;
    exit(1);
}